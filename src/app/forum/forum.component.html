<div class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="forum-title">Community Forum</h1>
    <div class="d-flex gap-3 align-items-center">
      <select class="form-select form-select-lg modern-select" (change)="onSortChange($event)">
        <option value="newest" selected>Newest</option>
        <option value="popular">Popular</option>
        <option value="unanswered">Unanswered</option>
      </select>
      <button class="btn btn-primary modern-btn" (click)="askQuestion()">Ask a Question â“</button>
    </div>
  </div>
  <div *ngIf="loading" class="text-center text-muted py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
  <div *ngIf="error" class="alert alert-danger text-center py-4 rounded-3">
    {{ error }}
  </div>
  <div *ngIf="!loading && !error && questions.length === 0" class="text-center text-muted py-5 bg-light rounded-3 modern-empty">
    No questions found ğŸ˜¢. Be the first to ask one!
  </div>
  <div *ngIf="!loading && !error && questions.length > 0" class="question-grid">
    <div *ngFor="let question of questions" class="card modern-card mb-3">
      <div class="card-body p-4">
        <div class="d-flex justify-content-between align-items-start gap-3">
          <div class="flex-grow-1">
            <h3 class="card-title mb-2">
              <a [routerLink]="['/forum', question._id]" class="question-link">{{ question.title }}</a>
            </h3>
            <p class="card-text text-muted mb-3 question-snippet">{{ question.content | slice:0:150 }}{{ question.content.length > 150 ? '...' : '' }}</p>
          </div>
          <button class="btn btn-outline-primary modern-vote-btn" (click)="upvoteQuestion(question._id)">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-up-circle" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z"/>
            </svg>
            <span class="vote-text">Upvote ğŸ‘</span>
          </button>
        </div>
        <div class="d-flex flex-wrap gap-3 text-sm text-muted align-items-center">
          <span>By {{ question.author?.firstName ? (question.author.firstName + ' ' + question.author.lastName) : 'Anonymous' }}</span>
          <span>{{ question.createdAt | date:'mediumDate' }}</span>
          <span>ğŸ—³ï¸ Votes: {{ question.voteScore }}</span>
          <span>ğŸ’¬ Answers: {{ question.answerCount || 0 }}</span>
          <span class="d-flex flex-wrap gap-2">
            <span *ngFor="let tag of question.tags" class="badge modern-badge">ğŸ·ï¸ {{ tag }}</span>
          </span>
        </div>
      </div>
    </div>
  </div>
</div>