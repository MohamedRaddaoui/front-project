<div class="container mx-auto px-4 py-8">
    <!-- Loading State -->
    @if (loading) {
      <div class="flex justify-center">
        <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
      </div>
    }

    <!-- Error Message -->
    @if (error) {
      <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
        {{error}}
      </div>
    }

    @if (question && !loading) {
      <div class="bg-white shadow-lg rounded-lg p-6">
        <!-- Question Header -->
        <div class="flex gap-4">
          <!-- Voting Controls -->
         

          <!-- Question Content -->
          <div class="flex-1">
            <h1 class="text-3xl font-bold mb-4">{{question.title}}</h1>
            <div class="prose max-w-none mb-6">
              {{question.content}}
            </div>
            <div class="flex gap-2 mb-6">
              @for (tag of question.tags; track tag) {
                <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">
                  {{tag}}
                </span>
              }
            </div>
          </div>
        </div>

        <!-- Answers Section -->
       
          <!-- Answer Form -->
          @if (currentUserId) {
            <form [formGroup]="answerForm" (ngSubmit)="onSubmitAnswer()" class="mt-8">
              <div class="mb-4">
                <label for="content" class="block text-sm font-medium text-gray-700 mb-2">
                  Your Answer
                </label>
                <textarea
                  id="content"
                  formControlName="content"
                  rows="6"
                  class="w-full rounded-lg border border-gray-300 p-3"
                  [class.border-red-500]="answerForm.get('content')?.invalid && answerForm.get('content')?.touched"
                ></textarea>
                @if (answerForm.get('content')?.invalid && answerForm.get('content')?.touched) {
                  <p class="text-red-500 text-sm mt-1">
                    Answer must be at least 10 characters long.
                  </p>
                }
              </div>
              <button type="submit"
                      [disabled]="answerForm.invalid"
                      class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50">
                Post Your Answer
              </button>
            </form>
          } @else {
            <p class="mt-8 text-center text-gray-600">
              Please <a routerLink="/login" class="text-blue-600 hover:underline">login</a> to answer this question.
            </p>
          }
        </div>
    }
</div>
