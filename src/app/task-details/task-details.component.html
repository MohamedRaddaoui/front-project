<div class="app-container">
    <div class="main-container">
        <app-side-bar></app-side-bar>
        <!-- Main Content -->
        <main class="content">
            <div class="content-header">
                <div class="control-section">
                    <div class="content-wrapper">
                            <!-- task-details.component.html -->
                            <div class="task-page">
                                <!-- Breadcrumb -->
                                <div class="breadcrumb">
                                    <i class="fas fa-tasks"></i>
                                    <a href="#">Tasks</a> / <span>{{ task.id || 'New Task' }}</span>
                                </div>

                                <!-- Error Message -->
                                <div class="error-message" *ngIf="errorMessage">
                                    <i class="fas fa-exclamation-circle"></i>
                                    {{ errorMessage }}
                                </div>

                                <!-- Header -->
                                <div class="task-header">
                                    <div class="task-title-section">
                                        <div class="title-input-wrapper" *ngIf="isEditMode || isCreateMode">
                                            <i class="fas fa-pen"></i>
                                            <input [(ngModel)]="task.title" 
                                                   name="title" 
                                                   placeholder="Task title"
                                                   class="title-input"
                                                   required />
                                        </div>
                                        <h2 *ngIf="!isEditMode && !isCreateMode">{{ task.title }}</h2>
                                        <div class="task-id" *ngIf="task.id">
                                            <i class="fas fa-hashtag"></i>
                                            {{ task.id }}
                                        </div>
                                    </div>
                                    <div class="action-buttons">
                                        <button *ngIf="!isEditMode && !isCreateMode" 
                                                class="btn btn-primary" 
                                                (click)="onEdit()">
                                            <i class="fas fa-edit"></i>
                                            Edit
                                        </button>
                                        <button *ngIf="isEditMode || isCreateMode" 
                                                class="btn btn-primary" 
                                                (click)="onSubmit()">
                                            <i class="fas fa-save"></i>
                                            Save
                                        </button>
                                        <button *ngIf="isEditMode || !isCreateMode" 
                                                class="btn btn-danger" 
                                                (click)="onDelete()">
                                            <i class="fas fa-trash"></i>
                                            Delete
                                        </button>
                                    </div>
                                </div>

                                <!-- Main content -->
                                <div class="task-content">
                                    <div class="content-left">
                                        <!-- Status Section -->
                                        <div class="status-section">
                                            <div class="status-buttons">
                                                <button class="btn" 
                                                        *ngFor="let status of ['To Do', 'In Progress', 'Done']"
                                                        [class.active]="task.status === status"
                                                        [disabled]="!isEditMode && !isCreateMode"
                                                        (click)="task.status = status">
                                                    <i class="fas" 
                                                       [class.fa-clock]="status === 'To Do'"
                                                       [class.fa-spinner]="status === 'In Progress'"
                                                       [class.fa-check-circle]="status === 'Done'">
                                                    </i>
                                                    {{ status }}
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Details Section -->
                                        <div class="field-group">
                                            <label>
                                                <i class="fas fa-tags"></i>
                                                Tags
                                            </label>
                                            <input [(ngModel)]="task.tags" 
                                                   name="tags"
                                                   placeholder="Enter tags (comma separated)"
                                                   [disabled]="!isEditMode && !isCreateMode"
                                                   class="input-field" />
                                        </div>

                                        <div class="field-group">
                                            <label>
                                                <i class="fas fa-flag"></i>
                                                Priority
                                            </label>
                                            <select [(ngModel)]="task.priority" 
                                                    name="priority"
                                                    [disabled]="!isEditMode && !isCreateMode"
                                                    class="select-field">
                                                <option *ngFor="let p of priorities" [value]="p">{{ p }}</option>
                                            </select>
                                        </div>

                                        <div class="field-group">
                                            <label>
                                                <i class="fas fa-align-left"></i>
                                                Description
                                            </label>
                                            <textarea [(ngModel)]="task.description" 
                                                      name="description"
                                                      [disabled]="!isEditMode && !isCreateMode"
                                                      rows="5"
                                                      placeholder="Enter task description"
                                                      class="textarea-field"></textarea>
                                        </div>

                                        <!-- Comments Section -->
                                        <div class="activity-section">
                                            <div class="activity-tabs">
                                                <button 
                                                    [class.active]="activeTab === 'comments'"
                                                    (click)="switchTab('comments')"
                                                    class="tab-button">
                                                    <i class="fas fa-comments"></i>
                                                    Comments
                                                </button>
                                                <button 
                                                    [class.active]="activeTab === 'history'"
                                                    (click)="switchTab('history')"
                                                    class="tab-button">
                                                    <i class="fas fa-history"></i>
                                                    History
                                                </button>
                                            </div>

                                            <!-- Comments Tab -->
                                            <div *ngIf="activeTab === 'comments'" class="comments-container">
                                                <div class="comments-list">
                                                    <div *ngFor="let comment of task.comments" class="comment">
                                                        <div class="comment-header">
                                                            <div class="user-info">
                                                                <img [src]="comment.user?.avatar" class="avatar" alt="User avatar"/>
                                                                <span class="username">{{ comment.user?.firstname }} {{ comment.user?.lastname }}</span>
                                                            </div>
                                                            <div class="comment-metadata">
                                                                <span class="comment-date">
                                                                    <i class="far fa-clock"></i>
                                                                    {{ comment.createdAt | date:'MMM d, y HH:mm' }}
                                                                </span>
                                                                <span class="sentiment-badge" [class]="comment.sentiment">
                                                                    <i class="fas" 
                                                                       [class.fa-smile]="comment.sentiment === 'positive'"
                                                                       [class.fa-meh]="comment.sentiment === 'neutral'"
                                                                       [class.fa-frown]="comment.sentiment === 'negative'">
                                                                    </i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="comment-content">
                                                            <p [class.flagged]="comment.isFlagged">{{ comment.text }}</p>
                                                            <div *ngIf="comment.attachments?.length" class="attachments">
                                                                <div *ngFor="let attachment of comment.attachments" class="attachment">
                                                                    <i class="fas fa-file"></i>
                                                                    <span class="filename">{{ attachment.filename }}</span>
                                                                    <button class="btn-icon" 
                                                                            (click)="deleteAttachment(comment._id, attachment._id)">
                                                                        <i class="fas fa-times"></i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="comment-actions">
                                                            <button (click)="deleteComment(comment._id)">
                                                                <i class="fas fa-trash"></i>
                                                                Delete
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="add-comment">
                                                    <button class="btn-add-comment" 
                                                            (click)="showCommentForm = true" 
                                                            *ngIf="!showCommentForm">
                                                        <i class="fas fa-plus"></i>
                                                        Add comment
                                                    </button>

                                                    <form *ngIf="showCommentForm" (ngSubmit)="addComment()" class="comment-form">
                                                        <div class="rich-text-editor">
                                                            <textarea [(ngModel)]="newComment.text" 
                                                                      name="commentText" 
                                                                      placeholder="Add a comment..."
                                                                      required></textarea>
                                                        </div>
                                                        <div class="form-actions">
                                                            <div class="file-upload">
                                                                <label for="file-input" class="file-label">
                                                                    <i class="fas fa-paperclip"></i>
                                                                    Attach files
                                                                </label>
                                                                <input id="file-input" 
                                                                       type="file" 
                                                                       (change)="onFileSelected($event)" 
                                                                       multiple 
                                                                       class="file-input" />
                                                            </div>
                                                            <div class="selected-files" *ngIf="newComment.files.length">
                                                                <div *ngFor="let file of newComment.files" class="selected-file">
                                                                    <i class="fas fa-file"></i>
                                                                    <span>{{ file.name }} ({{ formatFileSize(file.size) }})</span>
                                                                </div>
                                                            </div>
                                                            <div class="buttons">
                                                                <button type="button" 
                                                                        class="btn-cancel" 
                                                                        (click)="showCommentForm = false">
                                                                    <i class="fas fa-times"></i>
                                                                    Cancel
                                                                </button>
                                                                <button type="submit" 
                                                                        class="btn-submit"
                                                                        [disabled]="!newComment.text.trim()">
                                                                    <i class="fas fa-paper-plane"></i>
                                                                    Submit
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>

                                            <!-- History Tab -->
                                            <div *ngIf="activeTab === 'history'" class="history-container">
                                                <div class="history-list">
                                                    <div *ngFor="let entry of taskHistory" class="history-entry">
                                                        <div class="history-header">
                                                            <div class="user-info">
                                                                <span class="user-name">{{ entry.updatedBy.email }}</span>
                                                                <span class="timestamp">{{ formatDate(entry.createdAt) }}</span>
                                                            </div>
                                                        </div>
                                                        <div class="changes">
                                                            <div *ngFor="let field of entry.changes | keyvalue" class="change-item">
                                                                <div class="field-name">{{ getFieldLabel(field.key) }}</div>
                                                                <div class="change-details">
                                                                    <div class="old-value">
                                                                        <span class="value">{{ field.value.oldValue || 'Not set' }}</span>
                                                                        <span class="arrow">→</span>
                                                                        <span class="value new">{{ field.value.newValue }}</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div *ngIf="taskHistory.length === 0" class="no-history">
                                                        No changes have been recorded for this task.
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="content-right">
                                        <!-- People Section -->
                                        <div class="people-section">
                                           
                                            <div class="field-group">
                                                <label>
                                                    <i class="fas fa-user-check"></i>
                                                    Assignee
                                                </label>
                                                <select [(ngModel)]="task.assignedUser" 
                                                        name="assignedUser"
                                                        [disabled]="!isEditMode && !isCreateMode"
                                                        class="select-field">
                                                    <option *ngFor="let user of users" [value]="user._id">
                                                        {{ user.firstname }} {{ user.lastname }}
                                                    </option>
                                                </select>
                                            </div>
                                            <div class="field-group">
                                                <label>
                                                    <i class="fas fa-project-diagram"></i>
                                                    Project
                                                </label>
                                                <select [(ngModel)]="task.projectId" 
                                                        name="projectId"
                                                        [disabled]="!isEditMode && !isCreateMode"
                                                        class="select-field"
                                                        required>
                                                    <option value="">Select a project</option>
                                                    <option *ngFor="let project of projects" [value]="project._id">
                                                        {{ project.name }}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>

                                        <!-- Dates Section -->
                                        <div class="dates-section">
                                            <h3>
                                                <i class="fas fa-calendar-alt"></i>
                                                Dates
                                            </h3>
                                            <div class="field-group">
                                                <label>
                                                    <i class="fas fa-plus-circle"></i>
                                                    Created
                                                </label>
                                                <span>{{ task.createdAt | date:'MMM d, y' }}</span>
                                            </div>
                                            <div class="field-group">
                                                <label>
                                                    <i class="fas fa-edit"></i>
                                                    Updated
                                                </label>
                                                <span>{{ task.updatedAt | date:'MMM d, y' }}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
    
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal-overlay" *ngIf="showDeleteModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>
                <i class="fas fa-exclamation-triangle"></i>
                Confirm Deletion
            </h3>
        </div>
        <div class="modal-body">
            <p>Are you sure you want to delete this task?</p>
            <p class="task-title">"{{ task.title }}"</p>
            <p class="warning-text">This action cannot be undone.</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" (click)="showDeleteModal = false">
                <i class="fas fa-times"></i>
                Cancel
            </button>
            <button class="btn btn-danger" (click)="confirmDelete()">
                <i class="fas fa-trash"></i>
                Delete
            </button>
        </div>
    </div>
</div>

<style>
/* Modern Layout */
.task-page {
    background: linear-gradient(145deg, #f6f8fa, #f0f2f5);
    border-radius: 16px;
    padding: 32px;
    min-height: 100vh;
}

/* Breadcrumb */
.breadcrumb {
    margin-bottom: 24px;
    color: #42526E;
    font-size: 15px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.breadcrumb i {
    color: #0052CC;
    font-size: 18px;
    opacity: 0.9;
}

.breadcrumb a {
    color: #0052CC;
    text-decoration: none;
    position: relative;
    padding-bottom: 2px;
}

.breadcrumb a:after {
    content: '';
    position: absolute;
    width: 100%;
    height: 2px;
    bottom: 0;
    left: 0;
    background: #0052CC;
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.breadcrumb a:hover:after {
    transform: scaleX(1);
}

/* Task Header */
.task-header {
    background: white;
    padding: 24px;
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.06);
    margin-bottom: 32px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.task-header:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 32px rgba(0,0,0,0.08);
}

.task-title-section h2 {
    color: #172B4D;
    font-size: 28px;
    font-weight: 600;
    margin-bottom: 12px;
    letter-spacing: -0.5px;
}

/* Status Buttons */
.status-buttons {
    display: flex;
    gap: 16px;
    margin-bottom: 32px;
}

.status-buttons button {
    padding: 12px 24px;
    border-radius: 12px;
    border: none;
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 600;
    font-size: 15px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,0.06);
}

.status-buttons button:hover:not([disabled]) {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.1);
}

/* Status Colors with Gradients */
.status-buttons button:nth-child(1) {
    background: linear-gradient(135deg, #DEEBFF 0%, #B3D4FF 100%);
    color: #0747A6;
}

.status-buttons button:nth-child(2) {
    background: linear-gradient(135deg, #E3FCEF 0%, #ABF5D1 100%);
    color: #006644;
}

.status-buttons button:nth-child(3) {
    background: linear-gradient(135deg, #EAE6FF 0%, #C0B6F2 100%);
    color: #403294;
}

/* Field Groups */
.field-group {
    background: white;
    padding: 20px;
    border-radius: 16px;
    margin-bottom: 24px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.04);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.field-group:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0,0,0,0.06);
}

.field-group label {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #5E6C84;
    margin-bottom: 12px;
    font-weight: 500;
    font-size: 15px;
}

/* Input Fields */
.input-field, .select-field, .textarea-field {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid transparent;
    border-radius: 12px;
    font-size: 15px;
    background: #f4f5f7;
    transition: all 0.3s ease;
}

.input-field:focus, .select-field:focus, .textarea-field:focus {
    border-color: #0052CC;
    background: white;
    outline: none;
    box-shadow: 0 0 0 3px rgba(0,82,204,0.2);
}

/* Activity Section */
.activity-section {
    background: white;
    border-radius: 3px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.06);
    margin-top: 24px;
    overflow: hidden;
}

.activity-tabs {
    display: flex;
    background: #FAFBFC;
    border-bottom: 2px solid #DFE1E6;
    padding: 0;
    margin: 0;
    height: 48px;
}

.tab-button {
    height: 48px;
    padding: 0 24px;
    border: none;
    background: transparent;
    color: #42526E;
    font-size: 14px;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 8px;
    position: relative;
    cursor: pointer;
    transition: all 0.2s ease;
}

.tab-button i {
    font-size: 16px;
    opacity: 0.8;
}

.tab-button:hover {
    color: #0052CC;
    background: rgba(9, 30, 66, 0.04);
}

.tab-button.active {
    color: #0052CC;
    font-weight: 600;
    background: white;
}

.tab-button.active::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 100%;
    height: 2px;
    background: #0052CC;
}

/* Comments Section - Matching History Style */
.comments-container {
    padding: 12px 20px;
}

.comments-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.comment {
    background: white;
    border-radius: 8px;
    padding: 12px 16px;
    border: 1px solid rgba(9,30,66,0.08);
    transition: all 0.2s ease;
}

.comment:hover {
    background: #f8f9fa;
}

.comment-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.user-info {
    display: flex;
    align-items: center;
    gap: 8px;
}

.user-name {
    font-weight: 500;
    color: #172B4D;
    font-size: 14px;
}

.timestamp {
    color: #6B778C;
    font-size: 12px;
}

.comment-body {
    padding-left: 24px;
    border-left: 2px solid #DFE1E6;
    margin-left: 4px;
}

.comment-content {
    margin-bottom: 8px;
    padding: 8px 12px;
    background: #F4F5F7;
    border-radius: 6px;
    font-size: 13px;
    color: #172B4D;
    line-height: 1.5;
}

.comment-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 8px;
    padding: 4px 12px;
}

.sentiment-actions {
    display: flex;
    align-items: center;
    gap: 12px;
}

.sentiment-badge {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    border-radius: 3px;
    font-size: 12px;
    color: #42526E;
    background: rgba(9, 30, 66, 0.04);
    cursor: pointer;
    transition: all 0.2s ease;
}

.sentiment-badge:hover {
    background: rgba(9, 30, 66, 0.08);
}

.sentiment-badge i {
    font-size: 14px;
}

.sentiment-badge.positive i {
    color: #36B37E;
}

.sentiment-badge.neutral i {
    color: #6B778C;
}

.sentiment-badge.negative i {
    color: #FF5630;
}

.delete-action {
    opacity: 0;
    transition: opacity 0.2s ease;
}

.comment:hover .delete-action {
    opacity: 1;
}

.delete-action button {
    background: none;
    border: none;
    padding: 4px 8px;
    color: #42526E;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    border-radius: 3px;
    transition: all 0.2s ease;
}

.delete-action button:hover {
    background: rgba(9, 30, 66, 0.04);
    color: #DE350B;
}

.delete-action i {
    font-size: 14px;
}

/* Attachments in Comment */
.attachments {
    margin-top: 8px;
    padding-left: 24px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.attachment {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 8px;
    background: white;
    border: 1px solid #DFE1E6;
    border-radius: 3px;
    font-size: 12px;
    color: #42526E;
}

.attachment i {
    color: #0052CC;
    font-size: 14px;
}

/* Add Comment Section */
.add-comment {
    margin-top: 16px;
    padding: 0 20px 20px;
}

.comment-form {
    background: white;
    border-radius: 8px;
    border: 1px solid rgba(9,30,66,0.08);
    overflow: hidden;
}

.rich-text-editor {
    padding: 12px;
}

.rich-text-editor textarea {
    width: 100%;
    min-height: 80px;
    padding: 8px 12px;
    border: 1px solid #DFE1E6;
    border-radius: 3px;
    background: white;
    font-size: 13px;
    color: #172B4D;
    resize: vertical;
}

.rich-text-editor textarea:focus {
    border-color: #4C9AFF;
    outline: none;
    box-shadow: 0 0 0 2px rgba(76,154,255,0.2);
}

.form-actions {
    padding: 12px;
    background: #F4F5F7;
    border-top: 1px solid #DFE1E6;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.file-upload {
    display: flex;
    align-items: center;
}

.file-label {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    border-radius: 3px;
    background: white;
    border: 1px solid #DFE1E6;
    color: #42526E;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.file-label:hover {
    background: #F4F5F7;
}

.buttons {
    display: flex;
    gap: 8px;
}

.buttons button {
    padding: 6px 12px;
    border-radius: 3px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
}

.btn-submit {
    background: #0052CC;
    color: white;
    border: none;
}

.btn-submit:hover {
    background: #0747A6;
}

.btn-cancel {
    background: white;
    border: 1px solid #DFE1E6;
    color: #42526E;
}

.btn-cancel:hover {
    background: #F4F5F7;
}

/* History Section Redesign */
.history-container {
    padding: 12px 20px;
}

.history-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.history-entry {
    background: white;
    border-radius: 8px;
    padding: 12px 16px;
    border: 1px solid rgba(9,30,66,0.08);
    transition: all 0.2s ease;
}

.history-entry:hover {
    background: #f8f9fa;
}

.history-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.history-header .user-name {
    font-weight: 500;
    color: #172B4D;
    font-size: 14px;
}

.history-header .timestamp {
    color: #6B778C;
    font-size: 12px;
}

.changes {
    padding-left: 24px;
    border-left: 2px solid #DFE1E6;
    margin-left: 4px;
}

.change-item {
    margin-bottom: 8px;
    padding: 8px 12px;
    background: #F4F5F7;
    border-radius: 6px;
    font-size: 13px;
}

.field-name {
    color: #172B4D;
    font-weight: 500;
    margin-bottom: 4px;
    font-size: 13px;
}

.change-details {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #6B778C;
}

.old-value {
    text-decoration: line-through;
    color: #DE350B;
    opacity: 0.7;
}

.arrow {
    color: #6B778C;
    font-size: 12px;
}

.value.new {
    color: #00875A;
    font-weight: 500;
}

.no-history {
    text-align: center;
    color: #6B778C;
    padding: 24px;
    font-style: italic;
    background: #F4F5F7;
    border-radius: 8px;
}

/* Activity Tabs Refinement */
.activity-tabs {
    background: #F4F5F7;
    padding: 0;
    border-bottom: none;
}

.tab-button {
    padding: 12px 20px;
    font-weight: 500;
    font-size: 14px;
    color: #42526E;
    position: relative;
    transition: all 0.2s ease;
}

.tab-button.active {
    background: white;
    color: #0052CC;
    border-radius: 3px 3px 0 0;
}

.tab-button:hover:not(.active) {
    background: rgba(9,30,66,0.04);
    color: #172B4D;
}

.tab-button i {
    margin-right: 6px;
    font-size: 14px;
}

/* Add Comment Section Refinement */
.add-comment {
    padding: 16px 20px;
    background: white;
    margin: 0;
    border-top: 1px solid #DFE1E6;
}

.btn-add-comment {
    width: 100%;
    padding: 8px 12px;
    text-align: left;
    background: #F4F5F7;
    border: 1px solid #DFE1E6;
    border-radius: 3px;
    color: #42526E;
    font-size: 14px;
}

.btn-add-comment:hover {
    background: #EBECF0;
    transform: none;
    box-shadow: none;
}

.comment-form {
    margin-top: 12px;
}

.rich-text-editor textarea {
    min-height: 80px;
    border-radius: 3px;
    background: white;
    border: 1px solid #DFE1E6;
    padding: 12px;
    font-size: 14px;
}

.form-actions {
    margin-top: 12px;
}

.buttons {
    margin-top: 12px;
    gap: 8px;
}

.buttons button {
    padding: 8px 12px;
    font-size: 14px;
    border-radius: 3px;
}

/* Fix Input Fields Alignment */
.field-group {
    max-width: 100%;
    overflow: hidden;
}

.input-field, 
.select-field, 
.textarea-field {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    margin: 0;
    font-family: inherit;
}

.textarea-field {
    min-height: 120px;
    resize: vertical;
}

/* Tags Input Specific Style */
.field-group input[name="tags"] {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    padding: 12px 16px;
    border: 2px solid #DFE1E6;
    border-radius: 12px;
    font-size: 15px;
    background: #F4F5F7;
    transition: all 0.3s ease;
}

.field-group input[name="tags"]:focus {
    border-color: #0052CC;
    background: white;
    outline: none;
    box-shadow: 0 0 0 3px rgba(0,82,204,0.2);
}

/* Content Layout Fix */
.content-left {
    padding-right: 24px;
    flex: 1;
    min-width: 0; /* Prevents flex item from overflowing */
}

.content-right {
    width: 300px;
    flex-shrink: 0;
}

.task-content {
    display: flex;
    gap: 24px;
    margin-top: 24px;
}

/* Make sure all containers respect max-width */
.field-group,
.activity-section,
.comment,
.add-comment {
    max-width: 100%;
    box-sizing: border-box;
}

/* Action Buttons */
.action-buttons button {
    padding: 12px 24px;
    border-radius: 12px;
    border: none;
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 600;
    font-size: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.btn-primary {
    background: linear-gradient(135deg, #0052CC 0%, #0747A6 100%);
    color: white;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0,82,204,0.3);
}

.btn-danger {
    background: linear-gradient(135deg, #DE350B 0%, #BF2600 100%);
    color: white;
}

.btn-danger:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(222,53,11,0.3);
}

/* Add Comment Section */
.btn-add-comment {
    margin: 20px;
    width: calc(100% - 40px);
    padding: 16px;
    background: #f4f5f7;
    border: none;
    border-radius: 12px;
    color: #42526E;
    font-weight: 600;
    font-size: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

.btn-add-comment:hover {
    background: #ebecf0;
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.08);
}

/* File Upload */
.file-label {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 12px 24px;
    background: linear-gradient(135deg, #0052CC 0%, #0747A6 100%);
    color: white;
    border-radius: 12px;
    cursor: pointer;
    font-weight: 600;
    font-size: 15px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0,82,204,0.2);
}

.file-label:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0,82,204,0.3);
}

/* Icons with enhanced colors */
.fas {
    font-size: 18px;
}

.fa-plus { color: #36B37E; text-shadow: 0 2px 4px rgba(54,179,126,0.2); }
.fa-edit { color: #0052CC; text-shadow: 0 2px 4px rgba(0,82,204,0.2); }
.fa-trash { color: #DE350B; text-shadow: 0 2px 4px rgba(222,53,11,0.2); }
.fa-clock { color: #0052CC; text-shadow: 0 2px 4px rgba(0,82,204,0.2); }
.fa-spinner { color: #FF991F; text-shadow: 0 2px 4px rgba(255,153,31,0.2); }
.fa-check-circle { color: #36B37E; text-shadow: 0 2px 4px rgba(54,179,126,0.2); }
.fa-comments { color: #0052CC; text-shadow: 0 2px 4px rgba(0,82,204,0.2); }
.fa-history { color: #403294; text-shadow: 0 2px 4px rgba(64,50,148,0.2); }
.fa-users { color: #0052CC; text-shadow: 0 2px 4px rgba(0,82,204,0.2); }
.fa-tags { color: #00875A; text-shadow: 0 2px 4px rgba(0,135,90,0.2); }
.fa-flag { color: #FF5630; text-shadow: 0 2px 4px rgba(255,86,48,0.2); }
.fa-align-left { color: #6554C0; text-shadow: 0 2px 4px rgba(101,84,192,0.2); }
.fa-paperclip { color: #0052CC; text-shadow: 0 2px 4px rgba(0,82,204,0.2); }
.fa-file { color: #42526E; text-shadow: 0 2px 4px rgba(66,82,110,0.2); }

</style>
